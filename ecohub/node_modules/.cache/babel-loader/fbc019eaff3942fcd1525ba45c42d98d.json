{"ast":null,"code":"var _jsxFileName = \"/Users/elizabethgarson/Documents/github/EcoHub/ecohub/src/pages/Map.jsx\";\nimport React, { useRef, useEffect, useState } from 'react';\nimport Navbar from \"../components/Navbar.jsx\";\nimport maplibregl from 'maplibre-gl';\nimport 'maplibre-gl/dist/maplibre-gl.css';\nimport styles from \"../styles/MapWithForum.module.css\";\nimport initialStore from '../assets/initialStore.json';\nfunction MapWithForum() {\n  const mapRef = useRef(null);\n  const mapContainerRef = useRef(null);\n  const [searchQuery, setSearchQuery] = useState(\"\");\n  const posts = initialStore[\"forum-posts\"];\n  useEffect(() => {\n    const apiKey = 'zxI0KxtpdcNfhTmR7PEA';\n    mapRef.current = new maplibregl.Map({\n      container: mapContainerRef.current,\n      style: `https://api.maptiler.com/maps/basic-v2/style.json?key=${apiKey}`,\n      center: [-71.163, 42.3355],\n      zoom: 13.75\n    });\n    posts.forEach(post => {\n      if (post.lat && post.lng) {\n        const marker = new maplibregl.Marker().setLngLat([post.lng, post.lat]).setPopup(new maplibregl.Popup().setHTML(`<h3>${post.title}</h3>`)).addTo(mapRef.current);\n        marker.getElement().addEventListener('click', () => {\n          mapRef.current.flyTo({\n            center: [post.lng, post.lat],\n            zoom: 15\n          });\n        });\n      }\n    });\n    return () => {\n      if (mapRef.current) {\n        mapRef.current.remove();\n      }\n    };\n  }, [posts]);\n  const handleSearch = () => {\n    const apiKey = 'zxI0KxtpdcNfhTmR7PEA';\n    if (searchQuery.trim()) {\n      fetch(`https://api.maptiler.com/geocoding/${searchQuery}.json?key=${apiKey}`).then(res => res.json()).then(data => {\n        if (data.features && data.features.length > 0) {\n          const loc = data.features[0].geometry.coordinates;\n          mapRef.current.flyTo({\n            center: loc,\n            zoom: 14\n          });\n        } else {\n          alert(\"Location not found\");\n        }\n      }).catch(() => alert(\"Error during search\"));\n    }\n  };\n  const handlePostClick = (lat, lng) => {\n    if (mapRef.current) {\n      mapRef.current.flyTo({\n        center: [lng, lat],\n        zoom: 15\n      });\n    }\n  };\n  return /*#__PURE__*/React.createElement(\"main\", {\n    className: styles.pageContainer,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Navbar, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.searchContainer,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.eventsLabel,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 9\n    }\n  }, \"Events near:\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.searchBar,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    placeholder: \"Search location\",\n    value: searchQuery,\n    onChange: e => setSearchQuery(e.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(\"button\", {\n    onClick: handleSearch,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 11\n    }\n  }, \"Search\"))), /*#__PURE__*/React.createElement(\"div\", {\n    ref: mapContainerRef,\n    className: styles.mapContainer,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.forumSidebar,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    className: styles.forumTitle,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 9\n    }\n  }, \"Forum Feed\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.postList,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 9\n    }\n  }, posts.map((post, idx) => /*#__PURE__*/React.createElement(\"div\", {\n    key: idx,\n    className: styles.postItem,\n    onClick: () => handlePostClick(post.lat, post.lng),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"h4\", {\n    className: styles.postTitle,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 15\n    }\n  }, post.title), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.postTags,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 15\n    }\n  }, post.tags.map((tag, i) => /*#__PURE__*/React.createElement(\"span\", {\n    key: i,\n    className: styles.tag,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 19\n    }\n  }, tag))))))));\n}\nexport default MapWithForum;","map":{"version":3,"names":["React","useRef","useEffect","useState","Navbar","maplibregl","styles","initialStore","MapWithForum","mapRef","mapContainerRef","searchQuery","setSearchQuery","posts","apiKey","current","Map","container","style","center","zoom","forEach","post","lat","lng","marker","Marker","setLngLat","setPopup","Popup","setHTML","title","addTo","getElement","addEventListener","flyTo","remove","handleSearch","trim","fetch","then","res","json","data","features","length","loc","geometry","coordinates","alert","catch","handlePostClick","createElement","className","pageContainer","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","searchContainer","eventsLabel","searchBar","type","placeholder","value","onChange","e","target","onClick","ref","mapContainer","forumSidebar","forumTitle","postList","map","idx","key","postItem","postTitle","postTags","tags","tag","i"],"sources":["/Users/elizabethgarson/Documents/github/EcoHub/ecohub/src/pages/Map.jsx"],"sourcesContent":["import React, { useRef, useEffect, useState } from 'react';\nimport Navbar from \"../components/Navbar.jsx\"; \nimport maplibregl from 'maplibre-gl';\nimport 'maplibre-gl/dist/maplibre-gl.css';\nimport styles from \"../styles/MapWithForum.module.css\";\nimport initialStore from '../assets/initialStore.json';\n\nfunction MapWithForum() {\n  const mapRef = useRef(null);\n  const mapContainerRef = useRef(null);\n  const [searchQuery, setSearchQuery] = useState(\"\");\n  const posts = initialStore[\"forum-posts\"];\n\n  useEffect(() => {\n    const apiKey = 'zxI0KxtpdcNfhTmR7PEA';\n    mapRef.current = new maplibregl.Map({\n      container: mapContainerRef.current,\n      style: `https://api.maptiler.com/maps/basic-v2/style.json?key=${apiKey}`,\n      center: [-71.163, 42.3355],\n      zoom: 13.75,\n    });\n\n    posts.forEach(post => {\n      if (post.lat && post.lng) {\n        const marker = new maplibregl.Marker()\n          .setLngLat([post.lng, post.lat])\n          .setPopup(new maplibregl.Popup().setHTML(`<h3>${post.title}</h3>`))\n          .addTo(mapRef.current);\n\n        marker.getElement().addEventListener('click', () => {\n          mapRef.current.flyTo({ center: [post.lng, post.lat], zoom: 15 });\n        });\n      }\n    });\n\n    return () => {\n      if (mapRef.current) {\n        mapRef.current.remove();\n      }\n    };\n  }, [posts]);\n\n  const handleSearch = () => {\n    const apiKey = 'zxI0KxtpdcNfhTmR7PEA';\n    if (searchQuery.trim()) {\n      fetch(`https://api.maptiler.com/geocoding/${searchQuery}.json?key=${apiKey}`)\n        .then(res => res.json())\n        .then(data => {\n          if (data.features && data.features.length > 0) {\n            const loc = data.features[0].geometry.coordinates;\n            mapRef.current.flyTo({ center: loc, zoom: 14 });\n          } else {\n            alert(\"Location not found\");\n          }\n        })\n        .catch(() => alert(\"Error during search\"));\n    }\n  };\n\n  const handlePostClick = (lat, lng) => {\n    if (mapRef.current) {\n      mapRef.current.flyTo({ center: [lng, lat], zoom: 15 });\n    }\n  };\n\n  return (\n    <main className={styles.pageContainer}>\n      <Navbar />\n      <div className={styles.searchContainer}>\n        <div className={styles.eventsLabel}>Events near:</div>\n        <div className={styles.searchBar}>\n          <input\n            type=\"text\"\n            placeholder=\"Search location\"\n            value={searchQuery}\n            onChange={e => setSearchQuery(e.target.value)}\n          />\n          <button onClick={handleSearch}>Search</button>\n        </div>\n      </div>\n      <div ref={mapContainerRef} className={styles.mapContainer} />\n\n      <div className={styles.forumSidebar}>\n        <h2 className={styles.forumTitle}>Forum Feed</h2>\n        <div className={styles.postList}>\n          {posts.map((post, idx) => (\n            <div\n              key={idx}\n              className={styles.postItem}\n              onClick={() => handlePostClick(post.lat, post.lng)}\n            >\n              <h4 className={styles.postTitle}>{post.title}</h4>\n              <div className={styles.postTags}>\n                {post.tags.map((tag, i) => (\n                  <span key={i} className={styles.tag}>{tag}</span>\n                ))}\n              </div>\n            </div>\n          ))}\n        </div>\n      </div>\n    </main>\n  );\n}\n\nexport default MapWithForum;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}