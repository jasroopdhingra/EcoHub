{"ast":null,"code":"'use strict';\n\nvar List = function (component) {\n  this.component = component;\n  this.items = [];\n  this.active = 0;\n  this.wrapper = document.createElement('div');\n  this.wrapper.className = 'suggestions-wrapper';\n  this.element = document.createElement('ul');\n  this.element.className = 'suggestions';\n  this.wrapper.appendChild(this.element);\n\n  // selectingListItem is set to true in the time between the mousedown and mouseup when clicking an item in the list\n  // mousedown on a list item will cause the input to blur which normally hides the list, so this flag is used to keep\n  // the list open until the mouseup\n  this.selectingListItem = false;\n  component.el.parentNode.insertBefore(this.wrapper, component.el.nextSibling);\n  return this;\n};\nList.prototype.show = function () {\n  this.element.style.display = 'block';\n};\nList.prototype.hide = function () {\n  this.element.style.display = 'none';\n};\nList.prototype.add = function (item) {\n  this.items.push(item);\n};\nList.prototype.clear = function () {\n  this.items = [];\n  this.active = 0;\n};\nList.prototype.isEmpty = function () {\n  return !this.items.length;\n};\nList.prototype.isVisible = function () {\n  return this.element.style.display === 'block';\n};\nList.prototype.draw = function () {\n  this.element.innerHTML = '';\n  if (this.items.length === 0) {\n    this.hide();\n    return;\n  }\n  for (var i = 0; i < this.items.length; i++) {\n    this.drawItem(this.items[i], this.active === i);\n  }\n  this.show();\n};\nList.prototype.drawItem = function (item, active) {\n  var li = document.createElement('li'),\n    a = document.createElement('a');\n  if (active) li.className += ' active';\n  a.innerHTML = item.string;\n  li.appendChild(a);\n  this.element.appendChild(li);\n  li.addEventListener('mousedown', function () {\n    this.selectingListItem = true;\n  }.bind(this));\n  li.addEventListener('mouseup', function () {\n    this.handleMouseUp.call(this, item);\n  }.bind(this));\n};\nList.prototype.handleMouseUp = function (item) {\n  this.selectingListItem = false;\n  this.component.value(item.original);\n  this.clear();\n  this.draw();\n};\nList.prototype.move = function (index) {\n  this.active = index;\n  this.draw();\n};\nList.prototype.previous = function () {\n  this.move(this.active === 0 ? this.items.length - 1 : this.active - 1);\n};\nList.prototype.next = function () {\n  this.move(this.active === this.items.length - 1 ? 0 : this.active + 1);\n};\nList.prototype.drawError = function (msg) {\n  var li = document.createElement('li');\n  li.innerHTML = msg;\n  this.element.appendChild(li);\n  this.show();\n};\nmodule.exports = List;","map":null,"metadata":{},"sourceType":"script"}