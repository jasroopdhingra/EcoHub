{"ast":null,"code":"var _jsxFileName = \"/Users/elizabethgarson/Documents/github/EcoHub/ecohub/src/pages/Map.jsx\";\nimport React, { useRef, useEffect, useState } from 'react';\nimport maplibregl from 'maplibre-gl';\nimport 'maplibre-gl/dist/maplibre-gl.css';\nimport Navbar from '../components/Navbar.jsx';\nimport styles from '../styles/Map.module.css';\nimport initialStore from '../assets/initialStore.json';\nfunction MapWithForum() {\n  const mapRef = useRef(null);\n  const mapContainerRef = useRef(null);\n  const [searchQuery, setSearchQuery] = useState(\"\");\n  const [markers, setMarkers] = useState([]);\n  const events = initialStore[\"forum-posts\"];\n  useEffect(() => {\n    const apiKey = 'zxI0KxtpdcNfhTmR7PEA';\n    const map = new maplibregl.Map({\n      container: mapContainerRef.current,\n      style: `https://api.maptiler.com/maps/basic-v2/style.json?key=${apiKey}`,\n      center: [-71.1685, 42.3355],\n      // Boston College\n      zoom: 13.75\n    });\n    mapRef.current = map;\n    const newMarkers = events.map(post => {\n      const marker = new maplibregl.Marker().setLngLat([post.lng, post.lat]).setPopup(new maplibregl.Popup().setText(post.title)).addTo(map);\n      return {\n        ...post,\n        marker\n      };\n    });\n    setMarkers(newMarkers);\n    return () => {\n      map.remove();\n    };\n  }, []);\n  const handleSearch = () => {\n    const apiKey = 'zxI0KxtpdcNfhTmR7PEA';\n    fetch(`https://api.maptiler.com/geocoding/${searchQuery}.json?key=${apiKey}`).then(res => res.json()).then(data => {\n      var _data$features;\n      if ((_data$features = data.features) === null || _data$features === void 0 ? void 0 : _data$features.length) {\n        const [lng, lat] = data.features[0].geometry.coordinates;\n        mapRef.current.flyTo({\n          center: [lng, lat],\n          zoom: 14\n        });\n      } else {\n        alert(\"Location not found\");\n      }\n    });\n  };\n  const zoomToEvent = event => {\n    if (!mapRef.current) return;\n    mapRef.current.flyTo({\n      center: [event.lng, event.lat],\n      zoom: 15\n    });\n    event.marker.togglePopup();\n  };\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Navbar, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.pageContainer,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.leftSide,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.searchBarWrapper,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.label,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 13\n    }\n  }, \"Events near:\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.searchBar,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    placeholder: \"Search location\",\n    value: searchQuery,\n    onChange: e => setSearchQuery(e.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(\"button\", {\n    onClick: handleSearch,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 15\n    }\n  }, \"Search\"))), /*#__PURE__*/React.createElement(\"div\", {\n    ref: mapContainerRef,\n    className: styles.mapContainer,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.forumFeed,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 9\n    }\n  }, markers.map((event, idx) => /*#__PURE__*/React.createElement(\"div\", {\n    key: idx,\n    className: styles.feedCard,\n    onClick: () => zoomToEvent(event),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.feedTitle,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 15\n    }\n  }, event.title), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.feedTags,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 15\n    }\n  }, event.tags.map((tag, i) => /*#__PURE__*/React.createElement(\"span\", {\n    key: i,\n    className: styles.tag,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 19\n    }\n  }, tag))))))));\n}\nexport default MapWithForum;","map":{"version":3,"names":["React","useRef","useEffect","useState","maplibregl","Navbar","styles","initialStore","MapWithForum","mapRef","mapContainerRef","searchQuery","setSearchQuery","markers","setMarkers","events","apiKey","map","Map","container","current","style","center","zoom","newMarkers","post","marker","Marker","setLngLat","lng","lat","setPopup","Popup","setText","title","addTo","remove","handleSearch","fetch","then","res","json","data","_data$features","features","length","geometry","coordinates","flyTo","alert","zoomToEvent","event","togglePopup","createElement","Fragment","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","className","pageContainer","leftSide","searchBarWrapper","label","searchBar","type","placeholder","value","onChange","e","target","onClick","ref","mapContainer","forumFeed","idx","key","feedCard","feedTitle","feedTags","tags","tag","i"],"sources":["/Users/elizabethgarson/Documents/github/EcoHub/ecohub/src/pages/Map.jsx"],"sourcesContent":["import React, { useRef, useEffect, useState } from 'react';\nimport maplibregl from 'maplibre-gl';\nimport 'maplibre-gl/dist/maplibre-gl.css';\nimport Navbar from '../components/Navbar.jsx';\nimport styles from '../styles/Map.module.css';\nimport initialStore from '../assets/initialStore.json';\n\nfunction MapWithForum() {\n  const mapRef = useRef(null);\n  const mapContainerRef = useRef(null);\n  const [searchQuery, setSearchQuery] = useState(\"\");\n  const [markers, setMarkers] = useState([]);\n\n  const events = initialStore[\"forum-posts\"];\n\n  useEffect(() => {\n    const apiKey = 'zxI0KxtpdcNfhTmR7PEA';\n    const map = new maplibregl.Map({\n      container: mapContainerRef.current,\n      style: `https://api.maptiler.com/maps/basic-v2/style.json?key=${apiKey}`,\n      center: [-71.1685, 42.3355], // Boston College\n      zoom: 13.75,\n    });\n\n    mapRef.current = map;\n\n    const newMarkers = events.map((post) => {\n      const marker = new maplibregl.Marker()\n        .setLngLat([post.lng, post.lat])\n        .setPopup(new maplibregl.Popup().setText(post.title))\n        .addTo(map);\n\n      return { ...post, marker };\n    });\n\n    setMarkers(newMarkers);\n\n    return () => {\n      map.remove();\n    };\n  }, []);\n\n  const handleSearch = () => {\n    const apiKey = 'zxI0KxtpdcNfhTmR7PEA';\n    fetch(`https://api.maptiler.com/geocoding/${searchQuery}.json?key=${apiKey}`)\n      .then(res => res.json())\n      .then(data => {\n        if (data.features?.length) {\n          const [lng, lat] = data.features[0].geometry.coordinates;\n          mapRef.current.flyTo({ center: [lng, lat], zoom: 14 });\n        } else {\n          alert(\"Location not found\");\n        }\n      });\n  };\n\n  const zoomToEvent = (event) => {\n    if (!mapRef.current) return;\n    mapRef.current.flyTo({\n      center: [event.lng, event.lat],\n      zoom: 15\n    });\n    event.marker.togglePopup();\n  };\n\n  return (\n    <>\n      <Navbar />\n      <div className={styles.pageContainer}>\n        <div className={styles.leftSide}>\n          <div className={styles.searchBarWrapper}>\n            <div className={styles.label}>Events near:</div>\n            <div className={styles.searchBar}>\n              <input\n                type=\"text\"\n                placeholder=\"Search location\"\n                value={searchQuery}\n                onChange={(e) => setSearchQuery(e.target.value)}\n              />\n              <button onClick={handleSearch}>Search</button>\n            </div>\n          </div>\n\n          <div ref={mapContainerRef} className={styles.mapContainer} />\n        </div>\n\n        <div className={styles.forumFeed}>\n          {markers.map((event, idx) => (\n            <div key={idx} className={styles.feedCard} onClick={() => zoomToEvent(event)}>\n              <div className={styles.feedTitle}>{event.title}</div>\n              <div className={styles.feedTags}>\n                {event.tags.map((tag, i) => (\n                  <span key={i} className={styles.tag}>{tag}</span>\n                ))}\n              </div>\n            </div>\n          ))}\n        </div>\n      </div>\n    </>\n  );\n}\n\nexport default MapWithForum;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}